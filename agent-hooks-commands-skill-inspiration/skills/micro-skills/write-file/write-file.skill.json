{
  "name": "write-file",
  "version": "1.0.0",
  "description": "Pure execution micro-skill that writes content to disk. Handles atomic writes to prevent corruption, automatic backup creation, directory creation if needed, and conflict resolution strategies.",
  "type": "micro-skill",
  "tier": 3,
  "model": "haiku",
  "allowed_tools": ["Write"],
  "capabilities": [
    "file-write",
    "atomic-writes",
    "backup-creation",
    "directory-creation",
    "error-handling",
    "auto-retry"
  ],
  "input": {
    "type": "object",
    "properties": {
      "file_path": {
        "type": "string",
        "description": "Absolute path to file (required)"
      },
      "content": {
        "type": "string",
        "description": "Content to write (required)"
      },
      "encoding": {
        "type": "string",
        "description": "File encoding (default: 'utf-8')",
        "default": "utf-8",
        "optional": true
      },
      "atomic": {
        "type": "boolean",
        "description": "Use atomic write (tmp + rename). Default: true",
        "default": true,
        "optional": true
      },
      "backup": {
        "type": "boolean",
        "description": "Create .bak before overwrite. Default: false",
        "default": false,
        "optional": true
      },
      "create_dirs": {
        "type": "boolean",
        "description": "Create parent directories. Default: true",
        "default": true,
        "optional": true
      },
      "mode": {
        "type": "number",
        "description": "File permissions (e.g., 0o644). Default: 0o644",
        "default": "0o644",
        "optional": true
      }
    }
  },
  "output": {
    "type": "object",
    "properties": {
      "success": {
        "type": "boolean",
        "description": "Whether write succeeded"
      },
      "bytes_written": {
        "type": "number",
        "description": "Bytes written (if successful)",
        "optional": true
      },
      "file_path": {
        "type": "string",
        "description": "Final file path"
      },
      "backup_path": {
        "type": "string",
        "description": "Backup file path (if backup created)",
        "optional": true
      },
      "encoding": {
        "type": "string",
        "description": "Encoding used"
      },
      "created_dirs": {
        "type": "array",
        "description": "Directories created (if any)",
        "optional": true
      },
      "error": {
        "type": "object",
        "description": "Error details with context and suggestions",
        "optional": true,
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code (EACCES, ENOSPC, etc.)"
          },
          "message": {
            "type": "string",
            "description": "Human-readable message"
          },
          "context": {
            "type": "object",
            "description": "Additional context for recovery"
          },
          "suggestion": {
            "type": "string",
            "description": "What might fix it"
          }
        }
      }
    }
  },
  "invocation_patterns": [
    "Write content to file",
    "Save data to disk",
    "Create file with content",
    "Write with backup",
    "Atomic file write"
  ],
  "error_handling": {
    "autonomous_retry": {
      "EBUSY": {
        "attempts": 3,
        "backoff": "exponential",
        "delays_ms": [0, 100, 200]
      },
      "EACCES": {
        "attempts": 2,
        "backoff": "linear",
        "delays_ms": [0, 50]
      }
    },
    "context_aware_escalation": [
      "ENOENT",
      "ENOSPC",
      "EISDIR",
      "EROFS",
      "EEXIST"
    ]
  },
  "keywords": [
    "write",
    "file",
    "save",
    "disk",
    "create",
    "backup",
    "atomic"
  ],
  "domain": "file-system-operations",
  "role": "musician",
  "orchestration": false,
  "methodology": "none",
  "author": "Maestro System",
  "license": "MIT"
}
